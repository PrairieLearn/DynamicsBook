<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>
      Track transition curves
    </title>
    <link href="style.css" type="text/css" rel="stylesheet" />
    <link href="icomoon.css" type="text/css" rel="stylesheet" />

    <script src=
            "mathjax/MathJax.js?config=default"
            type="text/javascript">
            </script>
            <script src="jquery-1.7.2.min.js" type="text/javascript">
            </script>
            <script src="sylvester.js" type="text/javascript">
            </script>
            <script src="sha1.js" type="text/javascript">
            </script>
            <script src="PrairieDraw.js" type="text/javascript">
            </script>
            <script src="avt.js" type="text/javascript"></script>
            <script src="pageControl.js" type="text/javascript">
            </script>
  </head>
  <body>
    <div class="contentBlock">
      <div id="avt" class="section level2 contentCol">
        <h1>Track transition curves</h1>






        <div class="figureContainer" id="avt-ff">
          <img class="figureImage"
               alt="Aerial view of the High Five freeway interchange in Dallax, Texas"
               src="avt_6159432119_600.jpg" />
          <p class="figureCaption">
            Aerial view of the <a href="">High Five freeway
            interchange</a> in Dallas, Texas, taken with a <a
            href="http://en.wikipedia.org/wiki/Kite_aerial_photography">camera
            suspended from a kite line</a>.  Image source: <a
            href="http://www.fotopedia.com/items/flickr-6159432119">Fotopedia
            image</a>, from the <a
            href="http://www.flickr.com/photos/attawayjl/6159432119/">flikr
            image </a> by <a
            href="http://www.flickr.com/photos/attawayjl/">Jett
            Attaway</a> <a
            href="http://creativecommons.org/licenses/by/2.0/">(CC BY
            2.0)</a> (<a href="avt_6159432119.jpg">full-sized
            image</a>).
          </p>
        </div>



      </div>
      <div class="infoCol">
        <div class="infoBox requirementsBox">
          <ul>
            <li><a href="rvt.xhtml">Tangential/normal coordinates</a></li>
            <li><a href="rkv.xhtml">Position, velocity, and acceleration</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="contentBlock">
      <div id="avt-sc" class="section level3 contentCol">
        <h2>Circular arcs for transition curves</h2>
        <div class="figureContainer" id="avt-fc">
          <canvas id="avt-fc-c" width="600" height="600" class="figureImage">
          </canvas>
          <button class="anim-toggle:avt-fc-c">animate</button>
          <p class="figureCaption">
            Car driving around a track with perfect straight line
            segments joined to perfect semi-circle ends. Note the
            sudden jump in acceleration magnitude when the car
            switches from a straight line to the curve.
          </p>
        </div>
      </div>
      <div class="infoCol">
        <div id="avt-ih" class="infoBox factBox">
          <p>
            <a
            href="http://en.wikipedia.org/wiki/Jerk_(physics)">Jerk</a>
            (or jolt, surge, or lurch). Also <a
            href="http://en.wikipedia.org/wiki/Yank_(physics)">yank</a>
            for derivative of force with respect to time. <a
            href="http://en.wikipedia.org/wiki/Jounce">Jounce</a> is
            the (rarely used) derivative of jerk (so the 3rd
            derivative of position). Another suggestion is to refer to
            the 4th, 5th, and 6th derivatives of position as
            <em>snap</em>, <em>crackle</em>, and <em>pop</em>.
          </p>
        </div>
      </div>
    </div>
    <div class="contentBlock">
      <div id="avt-sq" class="section level3 contentCol">
        <h2>Smooth transitions from straight line motion</h2>
        <div class="figureContainer" id="avt-fq">
          <canvas id="avt-fq-c" width="600" height="600" class="figureImage">
          </canvas>
          <button class="anim-toggle:avt-fq-c">animate</button>
          <p class="figureCaption">
            Car driving around a track with perfect straight line
            segments joined to fifth-order polynomial segments. Note the
            smooth transition in acceleration when the car switches
            from a straight line to the curve.
          </p>
        </div>
      </div>
      <div class="infoCol">
        <div id="avt-ih" class="infoBox factBox">
          <p>
            The general technique for finding a polynomial that goes
            through certain points with certain derivative values is
            known as <a
            href="http://en.wikipedia.org/wiki/Hermite_interpolation">Hermite
            interpolation</a>.
          </p>
        </div>
      </div>
    </div>
    <div class="contentBlock">
      <div id="avt-sq" class="section level3 contentCol">
        <h2>Smooth transitions with Euler spirals</h2>
        <p>
          Using a <a href="rvt.xhtml">tangential/normal basis</a> we
          can write the acceleration vector as \[ \vec{a} = \ddot{s}
          \, \hat{e}_t + \kappa v^2 \, \hat{e}_n. \] For constant-speed
          motion with speed $v$, the distance along the curve
          satisfies $\dot{s} = v = \text{constant}$, so $\ddot{s} =
          0$. The acceleration vector thus only has a normal
          component, and this has magnitude proportional to the
          curvature $\kappa$.
        </p>
        <p>
          To design a track transition curve so acceleration changes
          gradually as we move along the curve (that is, the jerk is
          small), we need to have the curvature vary continuously
          along the curve, not jump from zero to a fixed value as was
          <a href="#avt-sc">the case above</a>. An appealing option
          would be to find a curve with a constant magnitude of jerk,
          so that there is a steady increase then decrease of
          acceleration as we transition between two straight line
          segments. This results in the <em>Euler spiral</em>.
        </p>
        <p>
          From the acceleration equation above, we can see that a
          constant rate of change of acceleration requires that the
          curvature is a linear function of distance, so that $\kappa
          = \alpha s$ for some constant $\alpha$. This determines the
          acceleration, and we can integrate the acceleration twice to
          find the expression for the position along the curve. If we
          define $\ell = \sqrt{\frac{\pi}{\alpha}}$ then the position
          at distance $s$ along the curve is:
        </p>
        <div class="envContainer equation" id="avt-ee">
          <p class="envHeader">Euler spiral</p>
          <div class="envBody">
            <p>
              \[\vec{r} = \ell C(s / \ell) \, \hat{\imath}
              + \ell S(s / \ell) \, \hat{\jmath}\]
            </p>
          </div>
        </div>
        <div class="envContainer derivation">
          <div class="envBody">
            <canvas id="avt-ee-c" width="300" height="200" class="floatRight noBorder">
            </canvas>
            <p>
              We start the spiral curve from the origin, initially
              moving horizontally to the right and curving upwards
              with constant speed $v$, as shown. Using a
              tangential/normal basis, let $\theta$ be the angle of
              $\hat{e}_t$ as shown. Then $\dot{\theta}$ can be found
              by considering two expressions for the
              acceleration. From the <a
              href="rvt.xhtml#rvt-ep">tangential/normal acceleration
              formula</a>: \[ \vec{a} = \ddot{s}
              \, \hat{e}_t + \kappa v^2 \, \hat{e}_n = \alpha
              s v^2 \, \hat{e}_n, \] where we used the
              fact that $\ddot{s} = \dot{v} = 0$ (constant speed) and
              that $\kappa = \alpha s$ for some constant $\alpha$
              (curvature is a linear function of distance $s$).
            </p>
            <p>
              The second expression for acceleration uses the angular
              velocity $\vec{\omega} = \dot\theta \, \hat{k}$ of the
              tangential/normal basis vectors. Recalling that $\vec{v}
              = v \, \hat{e}_t$ and $v$ is constant, we have
              \[\begin{aligned}
              \vec{a} = \dot{\vec{v}} = v \, \dot{\hat{e}}_t
              = v \, \vec{\omega} \times \vec{e}_t
              = v \dot{\theta} \, \hat{e}_n. \end{aligned}\]
            </p>
            <p>
              Comparing the two expressions for $\vec{a}$ and using $s = vt$ we see that
              \[ \dot{\theta} = \alpha s v = \alpha v^2 t \] and we can
              integrate this (with the initial condition that $\theta$
              starts at zero) to give \[ \theta = \frac{1}{2} \alpha
              v^2 t^2. \]
            </p>
            <p>
              To find the equation for $\vec{r}$ we can integrate the
              equation \[ \dot{\vec{r}} = v \, \hat{e}_t = v
              \cos\theta \, \hat{\imath} + v \sin\theta \,
              \hat{\jmath} \] starting from $\vec{r} = 0$ to obtain \[
              \begin{aligned} \vec{r} &amp;= \int_0^t \left(v
              \cos\Big(\frac{1}{2} \alpha v^2 \tau^2\Big) \,
              \hat{\imath} + v \sin\Big(\frac{1}{2} \alpha v^2 \tau^2
              \Big) \, \hat{\jmath}\right) d\tau \\ &amp;= \ell
              \int_0^{s/\ell} \left( \cos\Big(\frac{1}{2} \pi u^2\Big)
              \, \hat{\imath} + \sin\Big(\frac{1}{2} \pi u^2\Big) \,
              \hat{\jmath} \right) du, \end{aligned} \] where we made
              the substitution $\tau = \frac{\ell}{v} u$ with $\ell =
              \sqrt{\frac{\pi}{\alpha}}$. Using the definitions of the
              <a href="#avt-ef">Fresnel integrals</a> now gives the <a
              href="#avt-ee">desired expression</a>.
            </p>
          </div>
        </div>
        <p>
          The functions $C(z)$ and $S(z)$ are the <em>Fresnel
          integrals</em>:
        </p>
        <div class="envContainer equation" id="avt-ef">
          <p class="envHeader">Fresnel integrals</p>
          <div class="envBody">
            <p>
              \[\begin{aligned}
              C(z) &amp;= \int_0^z \cos\Big(\frac{1}{2} \pi u^2\Big) du \\
              S(z) &amp;= \int_0^z \sin\Big(\frac{1}{2} \pi u^2\Big) du
              \end{aligned}\]
            </p>
          </div>
        </div>
        <p>
          Plotting the Euler spiral equation gives the curve below,
          which we can see starts out at the origin with zero
          curvature, and the then has steadily increasing curvature as
          we move along it.
        </p>
        <div class="figureContainer" id="avt-fs">
          <canvas id="avt-fs-c" width="400" height="400" class="figureImage noBorder">
          </canvas>
          <p class="figureCaption">
            Euler spiral shape defined by the <a
            href="#avt-ee">equation above</a>. Changing the value of
            $\alpha$ simply scales the whole curve to make it bigger
            or smaller, without changing the shape.
          </p>
        </div>
        <p>
          The full Euler spiral is unsuitable for track transitions,
          as the curvature increases without limit. Instead, we can
          piece together short segments of the Euler spiral to form
          our transition curve. Using the <a href="#rvt-fc">oval track
          above</a>, we would like to replace the semi-circular ends
          with a two copies of the first quarter-turn of the Euler
          spiral. This will start the curvature from zero on the
          straight line segments, increase it smoothly, then decrease
          it again back to zero. This gives the following track shape.
        </p>
        <div class="figureContainer" id="avt-fe">
          <canvas id="avt-fe-c" width="600" height="600" class="figureImage">
          </canvas>
          <button class="anim-toggle:avt-fe-c">animate</button>
          <p class="figureCaption">
            Car driving around a track with perfect straight line
            segments joined to Euler-curve segments on the right-hand
            curve and a semi-circle on the left-hand curve. The red
            curve is a perfect semi-circle for comparison. Note the
            continuous transition in acceleration when the car
            switches from a straight line to the left-hand curve.
          </p>
        </div>
        <p>
          If we <button class="anim-toggle:avt-fe-c">animate</button>
          the motion around the track with Euler spiral transitions,
          then we can see from the acceleration magnitude plot that
          the peak acceleration needed on the Euler spiral transitions
          is somewhat higher than on the semi-circle transitions, but
          we have avoided the sudden jerk associated with switching
          from straight line to circular motion.
        </p>
      </div>
      <div class="infoCol">
        <div id="avt-is" class="infoBox factBox">
          <p>
            The equation for a spiral with linear curvature variation
            was first derived by the Swiss mathematician <a
            href="http://en.wikipedia.org/wiki/Leonhard_Euler">Leonard
            Euler</a> in 1744, hence the name <em>Euler
            spiral</em>. The spiral was then independently
            rediscovered in the 1800s by civil engineers who were
            unaware of Euler's work and named the resulting spiral the
            <em>clothoid</em>, which name is still commonly used. This
            spiral also arises in the study of near-field diffraction
            in optics, as developed by the French engineer <a
            href="http://en.wikipedia.org/wiki/Augustin-Jean_Fresnel">Augustin-Jean
            Fresnel</a> and the French physicist <a
            href="http://en.wikipedia.org/wiki/Marie_Alfred_Cornu">Alfred
            Cornu</a>, for which reason the spiral is also sometimes
            called the <em>Cornu spiral</em>.
          </p>
        </div>
        <div id="avt-is" class="infoBox factBox">
          <p>
            The Fresnel integrals $C(x)$ and $S(x)$ are examples of <a
            href="http://en.wikipedia.org/wiki/Special_function">special
            functions</a>. The term <em>special function</em> does not
            have a precise mathematical definition. Instead, these are
            functions which arise frequently in applications and which
            have been extensively analyzed and documented. The classic
            reference for many special functions is the book known
            generally as <em>Abramowitz and Stegun</em>. This refers
            to the publication:
          </p>
          <p>
            Abramowitz, Milton and Stegun, Irene A. (editors)
            <em>Handbook of Mathematical Functions with Formulas,
            Graphs, and Mathematical Tables</em>, Dover Publications,
            New York, 1972, ISBN 978-0-486-6.
          </p>
          <p>
            While the tables of special function values in Abramowitz
            and Stegun are no longer generally needed due to the
            advent of computers, there is still much useful
            information in the book. This useful information is now
            also available in the online successor <a
            href="http://dlmf.nist.gov/">Digital Library of
            Mathematical Functions</a> (DLMF) from the <a
            href="http://www.nist.gov/">National Institute of
            Standards and Technology</a> (NIST). For example, <a
            href="http://dlmf.nist.gov/7">Chapter 7</a> of the DLMF
            includes the <a href="http://dlmf.nist.gov/7.2.iii">the
            definition of the Fresnel integrals</a> as well as <a
            href="http://dlmf.nist.gov/7.3.F3">plots</a> of the
            functions and <a href="http://dlmf.nist.gov/7.6.i">series
            expansions</a> for them.
          </p>
        </div>
      </div>
    </div>
  </body>
</html>
